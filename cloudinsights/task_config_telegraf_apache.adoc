---
sidebar: sidebar 
permalink: task_config_telegraf_apache.html 
keywords: telegraf, installation, install, apache 
summary: Configuración del recopilador de datos de Apache 
---
= Recopilador de datos Apache
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Este recopilador de datos permite la recopilación de datos de servidores Apache en su entorno.

.Requisitos previos
* Debe tener su servidor Apache HTTP configurado y funcionando correctamente
* Debe tener permisos sudo o de administrador en el host/máquina virtual del agente
* Normalmente, el módulo Apache _mod_status_ se configura para exponer una página en la ubicación '/Server-status?auto' del servidor Apache. La opción _ExtendedStatus_ debe estar habilitada para poder recopilar todos los campos disponibles. Para obtener información acerca de cómo configurar el servidor, consulte la documentación del módulo Apache: https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable[]




== Instalación

. En *Observabilidad > Colectores*, haz clic en *+Recopilador de datos*. Elija Apache.
+
Seleccione el sistema operativo o la plataforma en la que está instalado el agente Telegraf.

. Si todavía no ha instalado un agente para la colección o desea instalar un agente para un sistema operativo o plataforma diferente, haga clic en _Mostrar instrucciones_ para expandir el link:task_config_telegraf_agent.html["Instalación del agente"] instrucciones.
. Seleccione la clave de acceso del agente para utilizarla con este recopilador de datos. Puede agregar una nueva clave de acceso del agente haciendo clic en el botón *+ clave de acceso del agente*. Práctica recomendada: Utilice una clave de acceso de agente diferente sólo cuando desee agrupar recopiladores de datos, por ejemplo, por sistema operativo/plataforma.
. Siga los pasos de configuración para configurar el recopilador de datos. Las instrucciones varían en función del tipo de sistema operativo o plataforma que utilice para recopilar datos.


image:ApacheDCConfigLinux.png["Configuración de Apache"]



== Configuración

El complemento de Telegraf para el servidor HTTP de Apache se basa en el módulo 'mod_status' para activarlo. Cuando esto está habilitado, el servidor HTTP de Apache expondrá un punto final HTML que se puede ver en el explorador o se puede raspar para extraer el estado de toda la configuración del servidor HTTP de Apache.



=== Compatibilidad:

La configuración se desarrolló contra Apache HTTP Server versión 2.4.38.



=== Habilitar mod_status:

La activación y exposición de los módulos 'mod_status' implica dos pasos:

* Módulo de activación
* Exposición de las estadísticas del módulo




=== Módulo de activación:

La carga de módulos se controla mediante el archivo de configuración en '/usr/local/apache/conf/httpd.conf'. Edite el archivo de configuración y anule el comentario de las siguientes líneas:

 LoadModule status_module modules/mod_status.so
 Include conf/extra/httpd-info.conf


=== Exposición de las estadísticas del módulo:

La exposición de 'mod_status' está controlada por el archivo de configuración bajo '/usr/local/apache2/conf/extra/httpd-info.conf'. Asegúrese de que dispone de lo siguiente en ese archivo de configuración (al menos, habrá otras directivas):

[listing]
----
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
<Location /server-status>
    SetHandler server-status
</Location>

#
# ExtendedStatus controls whether Apache will generate "full" status
# information (ExtendedStatus On) or just basic information (ExtendedStatus
# Off) when the "server-status" handler is called. The default is Off.
#
ExtendedStatus On
----
Para obtener instrucciones detalladas sobre el módulo 'Mod_status', consulte link:https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable["Documentación de Apache"]



== Objetos y contadores

Se recopilan los objetos siguientes y sus contadores:

[cols="<.<,<.<,<.<,<.<"]
|===
| Objeto: | Identificadores: | Atributos: | Puntos de datos: 


| Apache | Espacio de nombres
Servidor | IP del nodo
Nombre del nodo
Puerto
Generación de Configuración del Servidor Principal
Generación de MPM del servidor principal
Tiempo de actividad del servidor
Se está deteniendo | Trabajadores ocupados
Bytes por solicitud
Bytes por segundo
CPU Children System
Usuario secundario de CPU
Carga de CPU
Sistema de CPU
Usuario de CPU
Cierre de Conexiones Asíncronas
Las conexiones asíncronas se mantienen activas
Escritura de conexiones asíncronas
Total de Conexiones
Duración por solicitud
Trabajadores inactivos
Promedio de carga (últimos 1m)
Promedio de carga (últimos 15m)
Promedio de carga (últimos 5m)
Procesos
Solicitudes por segundo
Total de accesos
Duración total
KBytes totales
Cierre del marcador
Búsquedas de DNS de marcador
Acabado del marcador
Limpieza en vacío del marcador
El marcador se mantiene vivo
Registro de cuadro de mando
Marcador abierto
Lectura de marcador
Envío de marcador
Inicio del marcador
Marcador esperando 
|===


== Resolución de problemas

Puede encontrar información adicional en link:concept_requesting_support.html["Soporte técnico"] página.
