---
sidebar: sidebar 
permalink: task_config_telegraf_docker.html 
keywords: telegraf, installation, install, docker 
summary: Configuración de recopilador de datos de Docker 
---
= Recopilador de datos de Docker
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cloud Insights utiliza este recopilador de datos para recopilar métricas de Docker.



== Instalación

. En *Observabilidad > Colectores*, haz clic en *+Recopilador de datos*. Elija Docker.
+
Si no ha configurado un agente para la colección, se le pedirá que lo haga link:task_config_telegraf_agent.html["instale un agente"] en su entorno.

+
Si ya ha configurado un agente, seleccione el sistema operativo o la plataforma adecuados y haga clic en *continuar*.

. Siga las instrucciones de la pantalla de configuración de Docker para configurar el recopilador de datos. Las instrucciones varían en función del tipo de sistema operativo o plataforma que utilice para recopilar datos.


image:DockerDCConfigLinux.png["Configuración de Docker"]



== Configuración

El complemento de entrada de Telegraf para Docker recopila métricas a través de un socket UNIX o un extremo TCP especificado.



=== Compatibilidad

La configuración se desarrolló en comparación con Docker, versión 1.12.6.



=== Configuración



=== Acceso a Docker a través de un socket de UNIX

Si el agente de Telegraf se está ejecutando en baremetal, agregue el usuario de Unix telegraf al grupo Unix docker ejecutando lo siguiente:

 sudo usermod -aG docker telegraf
Si el agente de Telegraf se ejecuta en un pod de Kubernetes, exponga el socket Unix Docker asignando el socket al pod como un volumen y, a continuación, monte dicho volumen a /var/run/docker.sock.  Por ejemplo, agregue lo siguiente a PodSpec:

[listing]
----
volumes:
...
- name: docker-sock
hostPath:
path: /var/run/docker.sock
type: File
----
A continuación, añada lo siguiente al contenedor:

[listing]
----
volumeMounts:
...
- name: docker-sock
mountPath: /var/run/docker.sock
----
Tenga en cuenta que el instalador de Cloud Insights proporcionado para la plataforma de Kubernetes se ocupa automáticamente de este mapa.



=== Acceda a Docker a través de un extremo de TCP

De forma predeterminada, Docker utiliza el puerto 2375 para el acceso no cifrado y el puerto 2376 para el acceso cifrado.



== Objetos y contadores

Se recopilan los objetos siguientes y sus contadores:

[cols="<.<,<.<,<.<,<.<"]
|===
| Objeto: | Identificadores: | Atributos: | Puntos de datos: 


| Motor Docker | Espacio de nombres
Motor Docker | Nombre del nodo
IP del nodo
UUID de nodo
SO del nodo
Clúster de Kubernetes
Versión de Docker
Unidad | Memoria
Contenedores
Contenedores en pausa
Contenedores en ejecución
Los contenedores se detuvieron
CPU
Rutinas GO
Imágenes
Eventos de Listener
Descriptores de archivos usados
Datos disponibles
Total de datos
Datos utilizados
Metadatos disponibles
Total de metadatos
Metadatos utilizados
Tamaño de bloque de la piscina 


| Contenedor Docker | Espacio de nombres
Nombre del contenedor
Motor Docker | Hash de contenedor de Kubernetes
Puertos de contenedor de Kubernetes
Recuento de reinicios del contenedor de Kubernetes
Ruta del mensaje de terminación del contenedor de Kubernetes
Política de mensajes de terminación del contenedor de Kubernetes
Período de gracia de terminación de Kubernetes Pod
Imagen de contenedor
Estado del contenedor
Versión del contenedor
Nombre del nodo
Ruta de registro del contenedor de Kubernetes
Nombre del contenedor de Kubernetes
Tipo de Docker de Kubernetes
Nombre del pod de Kubernetes
Espacio de nombres de Pod de Kubernetes
UID de Pod de Kubernetes
ID de Sandbox de Kubernetes
IP del nodo
UUID de nodo
Versión de Docker
Configuración de IO de Kubernetes vista
Origen de configuración de E/S de Kubernetes
SCC de I/O de OpenShift
Descripción de Kubernetes
Nombre para mostrar de Kubernetes
Etiquetas OpenShift
Servicio de Kompose
Hash de plantilla de POD
Hash de revisión del controlador
Generación de plantillas de POD
Licencia
Fecha de creación del esquema
Licencia de esquema
Nombre del Esquema
URL de esquema
URL de VCS de Esquema
Proveedor de Esquema
Versión de Esquema
Versión de Esquema de Esquema
Encargado de mantenimiento
Pod de cliente
Nombre del pod de Kubernetes StatefulSet
Inquilino
Consola web
Arquitectura
URL de origen autorizado
Fecha de creación
Host de construcción RH
Componente RH
Ámbito de distribución
Instale
Liberar
Ejecución
Resumen
Desinstalar
Ref. VCS
Tipo de VCS
Proveedor
Versión
Estado
ID de contenedor | Memoria activa anónima
Archivo activo de memoria
Caché de memoria
Límite jerárquico de memoria
Memoria inactiva Anónimo
Archivo inactivo de memoria
Límite de memoria
Archivo asignado de memoria
Uso máximo de memoria
Fallo de página de memoria
Fallo principal de la página de memoria
Memoria paginada
Memoria paginada agotada
Tamaño de Juego Residente de Memoria
Tamaño de Juego de Residentes de Memoria Enorme
Memoria Total activa anónima
Total de Memoria de Archivo Activo
Caché total de memoria
Memoria Total Inactiva Anónima
Archivo inactivo total de memoria
Total de Memoria de Archivo Asignado
Fallo de página total de memoria
Fallo principal de página total de memoria
Total de Memoria Pagada en
Total de memoria agotada
Tamaño total del conjunto de residentes de memoria
Tamaño de Juego de Residentes Total de Memoria Enorme
No se puede acceder al total de memoria
No se puede usar la memoria
Uso de memoria
Porcentaje de uso de memoria
Código de salida
OOM matado
PID
Iniciado a las
Falla de Streak 


| Docker Container Block IO | Espacio de nombres
Nombre del contenedor
Dispositivo
Motor Docker | Hash de contenedor de Kubernetes
Puertos de contenedor de Kubernetes
Recuento de reinicios del contenedor de Kubernetes
Ruta del mensaje de terminación del contenedor de Kubernetes
Política de mensajes de terminación del contenedor de Kubernetes
Período de gracia de terminación de Kubernetes Pod
Imagen de contenedor
Estado del contenedor
Versión del contenedor
Nombre del nodo
Ruta de registro del contenedor de Kubernetes
Nombre del contenedor de Kubernetes
Tipo de Docker de Kubernetes
Nombre del pod de Kubernetes
Espacio de nombres de Pod de Kubernetes
UID de Pod de Kubernetes
ID de Sandbox de Kubernetes
IP del nodo
UUID de nodo
Versión de Docker
Configuración de Kubernetes vista
Origen de configuración de Kubernetes
SCC de OpenShift
Descripción de Kubernetes
Nombre para mostrar de Kubernetes
Etiquetas OpenShift
Versión de Esquema de Esquema
Hash de plantilla de POD
Hash de revisión del controlador
Generación de plantillas de POD
Servicio de Kompose
Fecha de creación del esquema
Licencia de esquema
Nombre del Esquema
Proveedor de Esquema
Pod de cliente
Nombre del pod de Kubernetes StatefulSet
Inquilino
Consola web
Fecha de creación
Licencia
Proveedor
Arquitectura
URL de origen autorizado
Host de construcción RH
Componente RH
Ámbito de distribución
Instale
Encargado de mantenimiento
Liberar
Ejecución
Resumen
Desinstalar
Ref. VCS
Tipo de VCS
Versión
URL de esquema
URL de VCS de Esquema
Versión de Esquema
ID de contenedor | Bytes de Servicio de E/S Asíncrono Recursivo
Lectura recursiva de bytes de servicio de E/S
Sincronización recursiva de bytes de servicio de E/S
Total Recursivo de Bytes de Servicio de E/S
Bytes de Servicio de E/S Escritura Recursiva
Asíncrono recursivo con servicio de I/O.
Lectura recursiva con servicio de I/O.
Sincronización recursiva con servicio de E/S.
Total Recursivo con Servicio de E/S
Escritura recursiva con servicio de I/O. 


| Red de contenedores Docker | Espacio de nombres
Nombre del contenedor
Red
Motor Docker | Imagen de contenedor
Estado del contenedor
Versión del contenedor
Nombre del nodo
IP del nodo
UUID de nodo
SO del nodo
Clúster K8s
Versión de Docker
ID de contenedor | Recepción descartada
Bytes de RX
Errores de RX
Paquetes RX
TX caído
Bytes de Tx
Errores de Tx
Paquetes TX 


| CPU de contenedor Docker | Espacio de nombres
Nombre del contenedor
CPU
Motor Docker | Hash de contenedor de Kubernetes
Puertos de contenedor de Kubernetes
Recuento de reinicios del contenedor de Kubernetes
Ruta del mensaje de terminación del contenedor de Kubernetes
Política de mensajes de terminación del contenedor de Kubernetes
Período de gracia de terminación de Kubernetes Pod
Configuración de Kubernetes vista
Origen de configuración de Kubernetes
SCC de OpenShift
Imagen de contenedor
Estado del contenedor
Versión del contenedor
Nombre del nodo
Ruta de registro del contenedor de Kubernetes
Nombre del contenedor de Kubernetes
Tipo de Docker de Kubernetes
Nombre del pod de Kubernetes
Espacio de nombres de Pod de Kubernetes
UID de Pod de Kubernetes
ID de Sandbox de Kubernetes
IP del nodo
UUID de nodo
SO del nodo
Clúster de Kubernetes
Versión de Docker
Descripción de Kubernetes
Nombre para mostrar de Kubernetes
Etiquetas OpenShift
Versión de Esquema
Hash de plantilla de POD
Hash de revisión del controlador
Generación de plantillas de POD
Servicio de Kompose
Fecha de creación del esquema
Licencia de esquema
Nombre del Esquema
Proveedor de Esquema
Pod de cliente
Nombre del pod de Kubernetes StatefulSet
Inquilino
Consola web
Fecha de creación
Licencia
Proveedor
Arquitectura
URL de origen autorizado
Host de construcción RH
Componente RH
Ámbito de distribución
Instale
Encargado de mantenimiento
Liberar
Ejecución
Resumen
Desinstalar
Ref. VCS
Tipo de VCS
Versión
URL de esquema
URL de VCS de Esquema
Versión de Esquema
ID de contenedor | Períodos de limitación
Períodos de limitación
Tiempo de limitación
Uso en modo Kernel
Uso en modo de usuario
Porcentaje de uso
Sistema de uso
Total de uso 
|===


== Resolución de problemas

[cols="2*"]
|===
| Problema: | Pruebe lo siguiente: 


| No veo mis métricas de Docker en Cloud Insights después de seguir las instrucciones en la página de configuración. | Compruebe los registros del agente de Telegraf para ver si informa del siguiente error:

 ¡E! Error en el plugin [inputs.docker]: Se ha denegado el permiso al intentar conectarse al socket del daemon de Docker

Si es así, siga los pasos necesarios para proporcionar al agente Telegraf acceso al socket Unix de Docker como se especificó anteriormente. 
|===
Puede encontrar información adicional en link:concept_requesting_support.html["Soporte técnico"] página.
