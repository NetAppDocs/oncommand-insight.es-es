---
sidebar: sidebar 
permalink: task_config_telegraf_hadoop.html 
keywords: telegraf, installation, install, Hadoop 
summary: Configuración de recopiladores de datos de Hadoop 
---
= Recopilador de datos de Hadoop
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cloud Insights utiliza este recopilador de datos para recopilar métricas de Hadoop.



== Instalación

. En *Observabilidad > Colectores*, haz clic en *+Recopilador de datos*. Elija Hadoop.
+
Seleccione el sistema operativo o la plataforma en la que está instalado el agente Telegraf.

. Si todavía no ha instalado un agente para la colección o desea instalar un agente para un sistema operativo o plataforma diferente, haga clic en _Mostrar instrucciones_ para expandir el link:task_config_telegraf_agent.html["Instalación del agente"] instrucciones.
. Seleccione la clave de acceso del agente para utilizarla con este recopilador de datos. Puede agregar una nueva clave de acceso del agente haciendo clic en el botón *+ clave de acceso del agente*. Práctica recomendada: Utilice una clave de acceso de agente diferente sólo cuando desee agrupar recopiladores de datos, por ejemplo, por sistema operativo/plataforma.
. Siga los pasos de configuración para configurar el recopilador de datos. Las instrucciones varían en función del tipo de sistema operativo o plataforma que utilice para recopilar datos.


image:HadoopDCConfigLinux-1.png["Configuración de Hadoop"]
image:HadoopDCConfigLinux-2.png["Configuración de Hadoop"]



== Configuración

Una puesta en marcha completa de Hadoop incluye los siguientes componentes:

* NameNode: El sistema primario de archivos distribuidos de Hadoop (HDFS). Coordina una serie de DataNodes.
* NombreNodo secundario: Una conmutación por error en caliente para el NameNode principal. En Hadoop, la promoción a NameNode no se realiza automáticamente. El NombreNodo secundario recopila información de NameNode para que esté listo para ser promovido cuando sea necesario.
* DataNode: Propietario real de los datos.
* ResourceManager: El sistema primario de computación (Yarn). Coordina una serie de NodeManagers.
* NodeManager: El recurso para la computación. Ubicación real para ejecutar aplicaciones.
* JobHistoryServer: Responsable del servicio de todas las solicitudes relacionadas con el historial de trabajos.


El complemento Hadoop se basa en el complemento Jolokia de telegraf. Como un requisito para recopilar información de todos los componentes de Hadoop, JMX debe configurarse y exponerse a través de Jolokia en todos los componentes.



=== Compatibilidad

La configuración se desarrolló con Hadoop versión 2.9.2.



=== Configuración



==== Agente Jolokia Jar

Para todos los componentes individuales, se debe descargar una versión del archivo JAR del agente JAR Jolokia. La versión probada contra fue link:https://jolokia.org/download.html["Agente Jolokia 1.6.0"].

Las instrucciones siguientes asumen que el archivo JAR descargado (jolokia-jvm-1.6.0-agent.jar) se coloca en la ubicación '/opt/hadoop/lib/'.



==== NombreNodo

Para configurar NameNode para exponer la API de Jolokia, puede configurar lo siguiente en <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export HADOOP_NAMENODE_OPTS="$HADOOP_NAMENODE_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7800,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8000 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8000 above) and Jolokia (7800). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== NombreNodo secundario

Para configurar el nodo secundario NameNode para exponer la API de Jolokia, puede configurar lo siguiente en <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export HADOOP_SECONDARYNAMENODE_OPTS="$HADOOP_SECONDARYNAMENODE_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7802,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8002 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8002 above) and Jolokia (7802). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== Nodo de datos

Para configurar DataNodes para exponer la API de Jolokia, puede configurar lo siguiente en <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export HADOOP_DATANODE_OPTS="$HADOOP_DATANODE_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7801,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8001 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8001 above) and Jolokia (7801). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== ResourceManager

Para configurar ResourceManager para exponer la API de Jolokia, puede configurar lo siguiente en <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export YARN_RESOURCEMANAGER_OPTS="$YARN_RESOURCEMANAGER_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7803,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8003 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8003 above) and Jolokia (7803). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== NodeManager

Para configurar NodeManagers para exponer la API de Jolokia, puede configurar lo siguiente en <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export YARN_NODEMANAGER_OPTS="$YARN_NODEMANAGER_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7804,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8004 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8004 above) and Jolokia (7804). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== JobHistoryServer

Para configurar JobHistoryServer para exponer la API de Jolokia, puede configurar lo siguiente en <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export HADOOP_JOB_HISTORYSERVER_OPTS="$HADOOP_JOB_HISTORYSERVER_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7805,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8005 -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8005 above) and Jolokia (7805). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


== Objetos y contadores

Se recopilan los objetos siguientes y sus contadores:

[cols="<.<,<.<,<.<,<.<"]
|===
| Objeto: | Identificadores: | Atributos: | Puntos de datos: 


| Nombre secundario de Hadoop | Clúster
Espacio de nombres
Servidor | Nombre del nodo
IP del nodo
Información de Compilación
Versión | Recuento de GC
Recuento de copias de GC
Cuenta compacta de barrido de marcas GC
Se ha excedido el umbral de información de Núm. De GC
Se ha excedido el umbral de advertencia de Núm. De GC
Tiempo GC
Tiempo de copia de GC
Marca GC Tiempo compacto de barrido
GC Tiempo de suspensión adicional total
Recuento de errores de logs
Registra el recuento fatal
Recuento de información de logs
Recuento de avisos de logs
Pila de Memoria Confirmada
Pila de Memoria Máx
Pila de Memoria Utilizada
Memoria máx
Memoria no confirmada
Memoria no Pila Máx
Memoria no utilizada
Threads bloqueados
Threads Nuevo
Threads Ejecutables
Threads terminados
Threads Timed en Espera
Threads en espera 


| NodeManager de Hadoop | Clúster
Espacio de nombres
Servidor | Nombre del nodo
IP del nodo | Contenedores asignados
Asignación de memoria
Oportunidad asignada de memoria
Núcleos virtuales asignados Oportunidad
Núcleos virtuales asignados
Memoria disponible
Núcleos virtuales disponibles
Directorios mal locales
Directorio Log incorrecto
Tamaño de caché antes de limpiar
Tiempo Medio de Duración de Lanzamiento del Contenedor
Núm. De Operaciones de Duración de Lanzamiento del Contenedor
Contenedores completados
Los contenedores han fallado
Inicialización de contenedores
Contenedores matados
Contenedores lanzados
Reinicio de contenedores
Se han revertido los contenedores en caso de fallo
Contenedores en ejecución
Utilización de discos: Buenos directorios locales
Buenos directorios de log de utilización de disco
Bytes Suprimidos Privados
Bytes Suprimidos Públicos
Los contenedores que ejecutan Opportunistic
Bytes Suprimidos Total
Conexiones aleatorias
Aleatorio de bytes de salida
Fallo al mezclar salidas
Salida aleatoria correcta
Recuento de GC
Recuento de copias de GC
Cuenta compacta de barrido de marcas GC
Se ha excedido el umbral de información de Núm. De GC
Se ha excedido el umbral de advertencia de Núm. De GC
Tiempo GC
Tiempo de copia de GC
Marca GC Tiempo compacto de barrido
GC Tiempo de suspensión adicional total
Recuento de errores de logs
Registra el recuento fatal
Recuento de información de logs
Recuento de avisos de logs
Pila de Memoria Confirmada
Pila de Memoria Máx
Pila de Memoria Utilizada
Memoria máx
Memoria no confirmada
Memoria no Pila Máx
Memoria no utilizada
Threads bloqueados
Threads Nuevo
Threads Ejecutables
Threads terminados
Threads Timed en Espera
Threads en espera 


| Administrador de recursos de Hadoop | Clúster
Espacio de nombres
Servidor | Nombre del nodo
IP del nodo | Promedio de retraso de inicio de ApplicationMaster
Núm. De retraso de inicio de ApplicationMaster
Promedio de retraso de registro de ApplicationMaster
Núm. De retraso de registro de ApplicationMaster
Núm. Activo de NodeManager
Núm. De NodeManager desactivado
Núm. De retirada del gestor de nodos
El gestor de nodos ha perdido el Núm.
Número de reinicio de NodeManager
Núm. De cierre de NodeManager
Número sano de NodeManager
Límite de memoria de NodeManager
Límite de núcleos virtuales de NodeManager
Capacidad utilizada
Aplicaciones activas
Usuarios activos
Contenedores agregados asignados
Contenedores agregados adelantados
Contenedores Agregados Liberados
Se adelantaron segundos de memoria agregada
Contenedores locales de nodo agregado asignados
Contenedores de Conmutador Desactivado Agregados Asignados
Agregar Contenedores Locales de Comprobación Asignados
Se han adelantado segundos núcleos virtuales agregados
Contenedores asignados
Memoria asignada
Núcleos virtuales asignados
Tiempo Medio de Retraso de Asignación de Primer Contenedor de Intento de Aplicación
Núm. De retraso de asignación de primer contenedor de intento de aplicación
Aplicaciones completadas
Error en las aplicaciones
Aplicaciones eliminadas
Solicitudes pendientes
Aplicaciones en ejecución
Solicitudes enviadas
Memoria disponible
Núcleos virtuales disponibles
Contenedores pendientes
Memoria pendiente
Núcleos virtuales pendientes
Contenedores reservados
Memoria reservada
Núcleos virtuales reservados
Maestro de aplicación de memoria utilizado
Núcleos virtuales ApplicationMaster utilizados
Capacidad utilizada
Recuento de GC
Recuento de copias de GC
Cuenta compacta de barrido de marcas GC
Se ha excedido el umbral de información de Núm. De GC
Se ha excedido el umbral de advertencia de Núm. De GC
Tiempo GC
Tiempo de copia de GC
Marca GC Tiempo compacto de barrido
GC Tiempo de suspensión adicional total
Recuento de errores de logs
Registra el recuento fatal
Recuento de información de logs
Recuento de avisos de logs
Pila de Memoria Confirmada
Pila de Memoria Máx
Pila de Memoria Utilizada
Memoria máx
Memoria no confirmada
Memoria no Pila Máx
Memoria no utilizada
Threads bloqueados
Threads Nuevo
Threads Ejecutables
Threads terminados
Threads Timed en Espera
Threads en espera 


| Nodo de datos de Hadoop | Clúster
Espacio de nombres
Servidor | Nombre del nodo
IP del nodo
ID de clúster
Versión | Recuento de transceptores
Transmisiones en curso
Capacidad de la caché
Caché utilizada
Capacidad
DFS utilizado
Total de capacidad estimada perdida
Ratio de Fallos del Último Volumen
Número de bloques en caché
Error de Núm. De Bloques en Caché
Error de número de bloques al anular la caché
Error en el número de volúmenes
Capacidad restante
Recuento de GC
Recuento de copias de GC
Cuenta compacta de barrido de marcas GC
Se ha excedido el umbral de información de Núm. De GC
Se ha excedido el umbral de advertencia de Núm. De GC
Tiempo GC
Tiempo de copia de GC
Marca GC Tiempo compacto de barrido
GC Tiempo de suspensión adicional total
Recuento de errores de logs
Registra el recuento fatal
Recuento de información de logs
Recuento de avisos de logs
Pila de Memoria Confirmada
Pila de Memoria Máx
Pila de Memoria Utilizada
Memoria máx
Memoria no confirmada
Memoria no Pila Máx
Memoria no utilizada
Threads bloqueados
Threads Nuevo
Threads Ejecutables
Threads terminados
Threads Timed en Espera
Threads en espera 


| NombreHadoop | Clúster
Espacio de nombres
Servidor | Nombre del nodo
IP del nodo
Último ID de transacción escrito
Tiempo desde las últimas ediciones cargadas
Estado de ALTA disponibilidad
Estado del sistema de archivos
ID del pool de bloques
ID de clúster
Información de Compilación
Recuento de versiones distinto
Versión | Capacidad de bloque
Total de bloques
Capacidad total
Capacidad utilizada
Capacidad utilizada no DFS
Bloques dañados
Total de capacidad estimada perdida
Exceso de Bloques
Latidos cardíacos caducados
Total de archivos
Longitud de la cola de bloqueo del sistema de archivos
Faltan bloques
Bloques que faltan replicación con el factor uno
Clientes activos
Nodos de datos muertos
Nodos de datos decomisionado inactivo
Nodos de datos decomisionado activo
Eliminación de nodos de datos
Número de zonas de cifrado
Nodos de datos que entran en Mantenimiento
Archivos en construcción
Nodos de datos muertos en mantenimiento
Los nodos de datos residen en mantenimiento
Nodos de datos activos
Almacenamientos obsoletos
Timeout Pendiente de Replicación
Mensaje de nodo de datos pendiente
Bloquea la supresión pendiente
Bloques Pendientes de Replicación
Bloques replicados incorrectamente pospuestos
Replicación programada de bloques
Snapshot
Directorios de Snapshottable
Nodos de datos obsoletos
Total de archivos
Carga total
Total de recuento de sincronizaciones
Transacciones desde el último punto de control
Transacciones desde la última acumulación de log
Bloques infrareplicados
Total de Fallos de Volumen
Total de tiempos de sincronización
Máximo de objetos
Adición de bloque de operaciones
Las operaciones permiten instantáneas
Bloque de operaciones por lotes
Bloque de operaciones en cola
Bloque de operaciones recibido y suprimido
Tiempo Medio del Informe de Operaciones
Núm. De informe de bloque de operaciones
Tiempo Medio de Informe de Caché
Núm. De informe de caché
Operaciones Crear archivo
Operaciones Crear instantáneas
Operaciones Crear enlace simbólico
Operaciones Suprimir archivo
Operaciones Suprimir Instantánea
Las operaciones no permiten la instantánea
Entrada/salida de archivo de operaciones
Archivos anexados
Archivos creados
Archivos eliminados
Lista de archivos
Archivos renombrados
Archivos truncados
Tiempo de carga del sistema de archivos
Las operaciones generan tiempo medio de EDEK
Las operaciones generan EDEK
Operaciones: Obtener Nodo de Datos Adicionales
Los bloques obtienen ubicaciones
Obtener tiempo medio de edición
Obtener número de edición
Tiempo medio de obtención de imagen
Obtener número de imagen
Operaciones Obtener Destino de Enlace
Listado de Operaciones de Obtención
Lista de operaciones Snapshottable Dir
Núm. De replicación no programado
Tiempo Medio de Imagen de PUT
Poner número de imagen
Las operaciones cambian el nombre de las instantáneas
Tiempo Medio de Comprobación de Recurso
Núm. De tiempo de comprobación de recursos
Tiempo de modo seguro
Informe de diferencia de instantánea de operaciones
Informe de bloques de almacenamiento de operaciones
Replicación correcta
Tiempo medio de sincronización
Núm. De Sincronización de Operaciones
Timeout de Replicación
Total de operaciones
Tiempo Medio de Transacción
Lote de Transacciones Sincronizado
Núm. De transacción
Tiempo Medio de Calentamiento de EDEK
Núm. De calentamiento de EDEK
Espacio Utilizado de Pool de Bloques
Capacidad de la caché
Caché utilizada
Capacidad libre
Porcentaje de Pool de Bloques Utilizado
Porcentaje restante
Porcentaje utilizado
Roscas
Recuento de GC
Recuento de copias de GC
Cuenta compacta de barrido de marcas GC
Se ha excedido el umbral de información de Núm. De GC
Se ha excedido el umbral de advertencia de Núm. De GC
Tiempo GC
Tiempo de copia de GC
Marca GC Tiempo compacto de barrido
GC Tiempo de suspensión adicional total
Recuento de errores de logs
Registra el recuento fatal
Recuento de información de logs
Recuento de avisos de logs
Pila de Memoria Confirmada
Pila de Memoria Máx
Pila de Memoria Utilizada
Memoria máx
Memoria no confirmada
Memoria no Pila Máx
Memoria no utilizada
Threads bloqueados
Threads Nuevo
Threads Ejecutables
Threads terminados
Threads Timed en Espera
Threads en espera 


| Hadoop JobHistoryServer | Clúster
Espacio de nombres
Servidor | Nombre del nodo
IP del nodo | Recuento de GC
Recuento de copias de GC
Cuenta compacta de barrido de marcas GC
Se ha excedido el umbral de información de Núm. De GC
Se ha excedido el umbral de advertencia de Núm. De GC
Tiempo GC
Tiempo de copia de GC
Marca GC Tiempo compacto de barrido
GC Tiempo de suspensión adicional total
Recuento de errores de logs
Registra el recuento fatal
Recuento de información de logs
Recuento de avisos de logs
Pila de Memoria Confirmada
Pila de Memoria Máx
Pila de Memoria Utilizada
Memoria máx
Memoria no confirmada
Memoria no Pila Máx
Memoria no utilizada
Threads bloqueados
Threads Nuevo
Threads Ejecutables
Threads terminados
Threads Timed en Espera
Threads en espera 
|===


== Resolución de problemas

Puede encontrar información adicional en link:concept_requesting_support.html["Soporte técnico"] página.
